<html>
<head>
    <meta charset="utf-8">
    <title>Sonic Vibrations</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <script src="./Tone.js"></script>
    <script src="./scripts/jquery.min.js"></script>
    <script src="./scripts/draggabilly.js"></script>
    <script src="./scripts/Interface.js"></script>
    <link rel="stylesheet" type="text/css" href="./styles/examples.css">
    <script src="./scripts/StartAudioContext.js"></script>
</head>
<body>
<div id="Content" class="FullScreen">
    <div id="Title">Sonic Code Sea</div>
    <div id="Explanation"> Granular</div>
    <div id="Sliders"></div>
     <div id="Sliders2"></div>
</div>
<script>
    var cutoffPos = 500;
    //// AUDIO MASTER
    var reverb = new Tone.JCReverb(0.5).toMaster();
    var delay = new Tone.FeedbackDelay(0.48, 0).connect(reverb);
    var dist = new Tone.Distortion(0.2).connect(delay);
    var filter1 = new Tone.Filter(20000, "lowpass", -24).connect(dist);
    //// FX PARAMS
    filter1.Q.value = 0.4;
    filter1.gain.value = 0.35;
    filter1.frequency.value = cutoffPos;
    reverb.wet.value = 0.7;
    Tone.context.latencyHint = "interactive";  // "balanced" "playback" "interactive"

    //the player
    var Sampler = new Tone.Sampler({
    'A1' : '1.[mp3|ogg]',
    'B1' : '2.[mp3|ogg]',
    'C2' : '3.[mp3|ogg]',
    'D2' : '4.[mp3|ogg]',
    'E2' : '5.[mp3|ogg]',
    'F2' : '6.[mp3|ogg]',
    'G2' : '7.[mp3|ogg]',
    'A2' : '8.[mp3|ogg]',
    }, {
        'release' : 1,
        'baseUrl' : './audio/Sampler/'
    }).connect(filter1);


    Sampler.volume.value = -20;

    // GUI //
    Interface.Loader();
    Interface.Button({
            text : "",
            activeText : "",
            parent : $("#Sliders"),
            type : "moment",
            start : function(){
                Sampler.triggerAttack("A1");
            },
            end : function(){
                 Sampler.triggerRelease("A1");
            }
        });
    Interface.Button({
            text : "Start",
            activeText : "Stop",
            parent : $("#Sliders"),
            type : "moment",
            start : function(){
                Sampler.triggerAttack("B1");
            },
            end : function(){
                 Sampler.triggerRelease("B1");
            }
        });
    Interface.Button({
            text : "Start",
            activeText : "Stop",
            parent : $("#Sliders"),
            type : "moment",
            start : function(){
                Sampler.triggerAttackRelease("C2",0.25);
            },
        });
    Interface.Button({
            text : "Start",
            activeText : "Stop",
            parent : $("#Sliders"),
            type : "moment",
            start : function(){
                Sampler.triggerAttackRelease("D2",0.25);
            },
        });
    /////SLIDERS 2
    Interface.Button({
            text : "Start",
            activeText : "Stop",
            parent : $("#Sliders2"),
            type : "moment",
            start : function(){
                Sampler.triggerAttackRelease("E2",0.25);
            },
        });
    Interface.Button({
            text : "Start",
            activeText : "Stop",
            parent : $("#Sliders2"),
            type : "moment",
            start : function(){
                Sampler.triggerAttackRelease("F2",0.25);
            },
        });
    Interface.Button({
            text : "Start",
            activeText : "Stop",
            parent : $("#Sliders2"),
            type : "moment",
            start : function(){
                Sampler.triggerAttackRelease("G2",0.25);
            },
        });
    Interface.Button({
            text : "Start",
            activeText : "Stop",
            parent : $("#Sliders2"),
            type : "moment",
            start : function(){
                Sampler.triggerAttackRelease("A2",0.25);
            },
        });
    Interface.Slider({
            param : "frequency",
            name : "Filter",
            parent : $("#Sliders"),
            tone : filter1,
            value : cutoffPos,
            min : 120,
            max : 20000,
            exp : 4.4,
        });
    Interface.Slider({
            param : "feedback",
            name : "feedback",
            parent : $("#Sliders"),
            tone : delay,
            value : 0,
            min : 0,
            max : 0.98  ,
        });
    Interface.Slider({
            name : "delayTime",
            parent : $("#Sliders"),
            value : 0,
            min : 0.01,
            max : 1.5,
            drag: function (value) {
            delay.delayTime.rampTo(value, 0.8);
        },
    });

    document.documentElement.addEventListener(
      "mousedown", function(){
        mouse_IsDown = true;
        if (Tone.context.state !== 'running') {
        Tone.context.resume();
      }});
</script>
</body>
</html>
